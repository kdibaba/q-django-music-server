<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
	<head>
	    <title>{% block title %}Music{% endblock %}</title>
	    <link href='http://fonts.googleapis.com/css?family=Volkhov' rel='stylesheet' type='text/css'>
	    <link href='http://fonts.googleapis.com/css?family=Kelly+Slab' rel='stylesheet' type='text/css'>
	    <link rel="stylesheet" type="text/css" href="/static/css/base.css" />
	    <link rel="stylesheet" type="text/css" href="/static/css/music.css" />
	    <link type="text/css" href="/static/css/jplayer.blue.monday.css" rel="stylesheet" />
	    <script src="/static/javascript/lib/jquery.min.js" type="text/javascript" charset="utf-8"></script>
	    <script src="/static/javascript/lib/jquery.jplayer.min.js" type="text/javascript" charset="utf-8"></script>
	    <script src="/static/javascript/lib/jplayer.playlist.min.js" type="text/javascript" charset="utf-8"></script>
	    <script src="/static/javascript/music.js" type="text/javascript" charset="utf-8"></script>
	    <script type="text/javascript">
	    $(document).ready(function(){

		    //HANDLE url changes
		    $(window).bind( 'hashchange', function(){handle_hash()});
		    handle_hash();

		    //HANDLE jPlayer size
			//var new_width = $(window).width() - 316
			//$('.jp-mute').css('margin-left', new_width+'px')
		    //$(window).resize(function() {
			//  var new_width = $(window).width() - 316  
			//  $('.jp-mute').css('margin-left', new_width+'px')
			//});
			
		    $('#menu_albums').bind('click', function(){$('.nav_button_albums').toggle()});
		    $('#menu_artists').bind('click', function(){$('.nav_button_artists').toggle()});
		    
		    $('.nav_button_artists').hover(function(){}, function(){$('.nav_button_artists').toggle()});
		    $('.nav_button_albums').hover(function(){}, function(){$('.nav_button_albums').toggle()});
				    
	    	PLAYLIST = new jPlayerPlaylist({
	    		jPlayer: "#jquery_jplayer_1",
	    		cssSelectorAncestor: "#jp_container_1"
	    	},  [], {
	    		swfPath: "/static/javascript/",
	    		supplied: "oga, mp3",
	    		solution: "flash, html"
	    	});
	    	$(document.documentElement).keyup(function (event) {
	    		if (event.keyCode == 32) {
		    		if(NOW_PLAYING){
		    		    PLAYLIST.pause();
		    			NOW_PLAYING = false
		    		}
		    		else{
			    		PLAYLIST.play();
			    		NOW_PLAYING = true
	    		  	}
	    		}
	    		else if (event.keyCode == 78) {
		    		if(PLAYLIST){
		    		    PLAYLIST.next();
		    		}
	    		}
	    		});
	    });
	    </script>
	    {% block head %}{% endblock %}
	    {% block extrahead %}{% endblock %}
	    
	</head>
	<body>
		<div id="site_header_wrapper">
			<div id="site_header">
				<qtext id="site_title">Q Music</qtext>
		   		{% if request.user.is_authenticated  %}
		   		<div id="logout">
		   			<text>Logged In : {{request.user.username.upper}}</text>
		   			<a href="/logout">Logout</a>
		   		</div>
		    	{% endif %}</text>
		    </div>
		</div>
		<div id="site_body">
			<div class=nav_button>
				<a href="/" >Home</a>
				<atext onclick="add_music(); return false">Add Music</atext>
				<atext ondblclick="location.href='#/artists/all'" id="menu_artists">Artists</atext>
				<atext ondblclick="location.href='#/albums/all'" id="menu_albums">Albums</atext>
			</div>
			<div class="nav_button_albums" style="display:none;">
				{% for letter in letter_list %}
					<atext onclick="location.href='/#/albums/{{letter}}'">{{letter}}</atext>
				{% endfor %}
			</div>
			<div class="nav_button_artists" style="display:none;">
				{% for letter in letter_list %}
					<atext onclick="location.href='/#/artists/{{letter}}'">{{letter}}</atext>
				{% endfor %}
			</div>
			<div id=content>
				<center><text id="welcome">Q</text></center>
				{% block content %}{% endblock %}
			</div>
			</div>
			<div id="footer_wrapper">
				<div id="footer">
				<div id="playlist_button_wrapper">')
					<button id="playlist_button" onclick="show_playlist()">Show Playlist</button>'
					<button id="playlist_button" onclick="hide_playlist()">Hide Playlist</button>'
				</div>
				<div id="jplayer_div">
				<div id="jquery_jplayer_1" class="jp-jplayer"></div>
				
						<div id="jp_container_1" class="jp-audio">
							<div class="jp-type-playlist">
								<div class="jp-gui jp-interface">
									<ul class="jp-controls">
										<li><a href="javascript:;" class="jp-previous" tabindex="1">previous</a></li>
										<li><a href="javascript:;" class="jp-play" tabindex="1">play</a></li>
										<li><a href="javascript:;" class="jp-pause" tabindex="1">pause</a></li>
										<li><a href="javascript:;" class="jp-next" tabindex="1">next</a></li>
										<li><a href="javascript:;" class="jp-stop" tabindex="1">stop</a></li>
										<li><a href="javascript:;" class="jp-mute" tabindex="1" title="mute">mute</a></li>
										<li><a href="javascript:;" class="jp-unmute" tabindex="1" title="unmute">unmute</a></li>
										<li><a href="javascript:;" class="jp-volume-max" tabindex="1" title="max volume">max volume</a></li>
									</ul>
									<div class="jp-progress">
										<div class="jp-seek-bar">
											<div class="jp-play-bar"></div>
										</div>
									</div>
									<div class="jp-volume-bar">
										<div class="jp-volume-bar-value"></div>
									</div>
									<div class="jp-time-holder">
										<div class="jp-current-time"></div>
										<div class="jp-duration"></div>
									</div>
									<ul class="jp-toggles">
										<li><a href="javascript:;" class="jp-shuffle" tabindex="1" title="shuffle">shuffle</a></li>
										<li><a href="javascript:;" class="jp-shuffle-off" tabindex="1" title="shuffle off">shuffle off</a></li>
										<li><a href="javascript:;" class="jp-repeat" tabindex="1" title="repeat">repeat</a></li>
										<li><a href="javascript:;" class="jp-repeat-off" tabindex="1" title="repeat off">repeat off</a></li>
									</ul>
								</div>
								<div class="jp-playlist">
									<ul>
										<li></li>
									</ul>
								</div>
								<div class="jp-no-solution">
									<span>Update Required</span>
									To play the media you will need to either update your browser to a recent version or update your <a href="http://get.adobe.com/flashplayer/" target="_blank">Flash plugin</a>.
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
	</body>
</html>